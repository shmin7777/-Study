Vagrantfile을 수정해 원하는 구성이 자동으로 CentOS에 입력되도록 해 보자!  

## 가상 머신에 필요한 설정 자동으로 구성하기
베어그런트 코드는 루비(Ruby)라는 언어로 작성.  

``` ruby
# -*- mode: ruby -*- 
# vi: set ft=ruby :

# do 는 베이그런트 설정의 시작을 알림
# end 는 do로 시작한 작업을 종료
# provider : 베어그런트를 통해 제공되는 코트가 실제로 가상 머신으로 배포되게 하는 소프트웨어 - VirtualBox가 provider에 해당됨
# 호스트 전용 네트워크는 호스트 내부에 192.168.1.0 대의 사설망을 구성,
# 가상머신은 NAT(Network Address Translation, 네트워크 주소 변환) 인터페이스인 eth0을 통해 인터넷에 접속

# ssh 통신은 호스트 60010번을 게스트 22번으로 전달하는데 혹시 모를 포트 중복을 대비해 auto_correct: true로 설정해서 포트가 중복되면 자동으로 변경되도록 함
# ssh 서비스의 기본 포트 번호인 22번을 id: "ssh"로 설정하지 않으면 중복된 두 개의 포트로 설정. 
# 자기 자신(127.0.0.1/localhost)의 2222번 포트로 오는 내용과 모든 IP(0.0.0.0)DML 60010포트에 오는 내용을 게스트의 22번으로 포워딩함.


Vagrant.configure("2") do |config| # "2"는 베어그런트에서 루비로 코드를 읽어 들여 실행할 때 작동하는API버전
  config.vm.define "m-k8s" do |cfg| # 가상 머신을  "m-k8s"로 정의, 원하는 설정으로 변경
    cfg.vm.box = "sysnet4admin/CentOS-k8s" 
    cfg.vm.provider "virtualbox" do |vb| # 베어그런트의 프로바이더(provider)가 VirtualBox정의
      vb.name = "m-k8s(github_SysNet4Admin)" # 가상 머신의 이름
      vb.cpus = 2 # CPU 수
      vb.memory = 2048 # 메모리 크기
      vb.customize ["modifyvm", :id, "--groups", "/k8s-SM(github_SysNet4Admin)"] # 소속된 그룹 명시
    end
    cfg.vm.host_name = "m-k8s" # 가상 머신 자체에 대한 설정 시작, 호스트 이름 설정
    cfg.vm.network "private_network", ip: "192.168.1.10" # eth1 인터페이스를 호스트 전용으로 구성
    cfg.vm.network "forwarded_port", guest: 22, host: 60010, auto_correct: true, id: "ssh" 
    cfg.vm.synced_folder "../data", "/vagrant", disabled: true # 호스트(PC)와 게스트(가상 머신)사이에 디렉터리 동기화가 이뤄지지 않게 설정.
    end
end

```

#### 코드 실행
1. vagrant up
1. vagrant ssh
1. ip addr show eth1 명령을 입력해 IP(192.168.1.10)가 제대로 설정됐는지 확인
1. exit 명령을 실행해 CentOS 접속 종료


## 가상 머신에 추가 패키지 설치하기
필요한 내용이 설정된 Vagrantfile을 통해 CentOS에 호스트네임, IP 등을 자동으로 설정해 보았다.  
이번에는 CentOS에 필요한 패키지를 설치하는 방법을 알아보자.  
![image](https://user-images.githubusercontent.com/67637716/153905871-9c9873c6-38ab-4861-b095-6618b3339789.png)





